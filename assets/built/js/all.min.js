document.addEventListener("DOMContentLoaded",()=>{const i=document.documentElement,n=document.getElementById("theme-dropdown-btn"),o=document.getElementById("theme-options"),s=document.getElementById("theme-icon"),r=document.getElementById("theme-label"),d={light:{name:"Clair",icon:"/assets/icons/light.webp"},dark:{name:"Sombre",icon:"/assets/icons/moon.webp"},system:{name:"Système",icon:"/assets/icons/system.webp"}};var e;const a=e=>{var e=d.hasOwnProperty(e)?e:"system",t="system"===e?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e;i.classList.toggle("dark","dark"===t),s.src=d[e].icon,r.textContent=d[e].name};a((e=localStorage.getItem("theme"),d.hasOwnProperty(e)?e:"system")),n.addEventListener("click",()=>{o.classList.toggle("hidden"),n.setAttribute("aria-expanded",o.classList.contains("hidden")?"false":"true")}),o.querySelectorAll("li").forEach(t=>{t.addEventListener("click",()=>{var e=t.getAttribute("data-theme");if("system"===e)localStorage.removeItem("theme");else{if(!d.hasOwnProperty(e))return void console.warn("Thème invalide ignoré : "+e);localStorage.setItem("theme",e)}a(e),o.classList.add("hidden"),n.setAttribute("aria-expanded","false")})}),document.addEventListener("click",e=>{n.contains(e.target)||o.contains(e.target)||(o.classList.add("hidden"),n.setAttribute("aria-expanded","false"))})}),function(t,i){var n,o,s,r,d,a,c,h;function l(){var e;404===this.status?(t.removeEventListener("scroll",u),t.removeEventListener("resize",p)):(this.response.querySelectorAll("article.post-card").forEach(function(e){o.appendChild(i.importNode(e,!0))}),(e=this.response.querySelector("link[rel=next]"))?n.href=e.href:(t.removeEventListener("scroll",u),t.removeEventListener("resize",p)),h=i.documentElement.scrollHeight,d=r=!1)}function e(){var e;d||(a+c<=h-s?r=!1:(d=!0,(e=new t.XMLHttpRequest).responseType="document",e.addEventListener("load",l),e.open("GET",n.href),e.send(null)))}function m(){r||t.requestAnimationFrame(e),r=!0}function u(){a=t.scrollY,m()}function p(){c=t.innerHeight,h=i.documentElement.scrollHeight,m()}i.documentElement.classList.contains("no-infinite-scroll")||(n=i.querySelector("link[rel=next]"))&&(o=i.querySelector(".post-feed"))&&(d=r=!(s=300),a=t.scrollY,c=t.innerHeight,h=i.documentElement.scrollHeight,t.addEventListener("scroll",u,{passive:!0}),t.addEventListener("resize",p),m())}(window,document),document.addEventListener("DOMContentLoaded",function(){var e=document.querySelector(".navbar-burger");const t=document.querySelector(".navbar-menu");var i=document.querySelector(".navbar-close"),n=document.querySelector(".navbar-backdrop");const o=document.getElementById("site-header");let s=!0;Date.now();let r,d,a;function c(){t&&(t.classList.remove("animate-slide-fade-in"),t.classList.add("animate-slide-fade-out"),setTimeout(()=>{t.classList.add("hidden"),t.classList.remove("fixed","inset-0","w-screen","h-screen","z-[999]");var e=-1*parseInt(document.body.style.top||"0");document.body.style.position="",document.body.style.top="",document.body.style.left="",document.body.style.right="",document.body.style.width="",window.scrollTo(0,e)},300))}function h(){s||(o.classList.remove("translate-y-neg-120"),s=!0)}function l(){d&&clearTimeout(d),d=setTimeout(()=>{var e;e=window.scrollY,s&&0<e&&o.classList.contains("w-[30%]")&&(o.classList.add("translate-y-neg-120"),s=!1)},2e3)}function m(){var e=window.scrollY;768<window.innerWidth&&(0===e?(o.classList.add("w-full","py-2"),o.classList.remove("w-[30%]","shadow-md"),h()):(e=o.classList.contains("w-[30%]"),o.classList.add("w-[30%]","shadow-md"),o.classList.remove("w-full","py-2"),e||l()))}e&&e.addEventListener("click",function(){t&&(a=window.scrollY,document.body.style.position="fixed",document.body.style.top=`-${a}px`,document.body.style.left="0",document.body.style.right="0",document.body.style.width="100%",t.classList.remove("hidden","animate-slide-fade-out"),t.offsetWidth,t.classList.add("fixed","inset-0","w-screen","h-screen","z-[999]","animate-slide-fade-in"))}),i&&i.addEventListener("click",c),n&&n.addEventListener("click",c),window.addEventListener("scroll",()=>{m()}),window.addEventListener("mousemove",()=>{r=Date.now(),h(),o.classList.contains("w-[30%]")&&l()}),window.addEventListener("resize",m),m(),h()}),function(e,t){"function"==typeof define&&define.amd?define("ev-emitter/ev-emitter",t):"object"==typeof module&&module.exports?module.exports=t():e.EvEmitter=t()}("undefined"!=typeof window?window:this,function(){function e(){}var t=e.prototype;return t.on=function(e,t){var i;if(e&&t)return-1==(i=(i=this._events=this._events||{})[e]=i[e]||[]).indexOf(t)&&i.push(t),this},t.once=function(e,t){var i;if(e&&t)return this.on(e,t),((i=this._onceEvents=this._onceEvents||{})[e]=i[e]||{})[t]=!0,this},t.off=function(e,t){e=this._events&&this._events[e];if(e&&e.length)return-1!=(t=e.indexOf(t))&&e.splice(t,1),this},t.emitEvent=function(e,t){var i=this._events&&this._events[e];if(i&&i.length){i=i.slice(0),t=t||[];for(var n=this._onceEvents&&this._onceEvents[e],o=0;o<i.length;o++){var s=i[o];n&&n[s]&&(this.off(e,s),delete n[s]),s.apply(this,t)}return this}},t.allOff=function(){delete this._events,delete this._onceEvents},e}),function(t,i){"use strict";"function"==typeof define&&define.amd?define(["ev-emitter/ev-emitter"],function(e){return i(t,e)}):"object"==typeof module&&module.exports?module.exports=i(t,require("ev-emitter")):t.imagesLoaded=i(t,t.EvEmitter)}("undefined"!=typeof window?window:this,function(t,e){function s(e,t){for(var i in t)e[i]=t[i];return e}function r(e,t,i){var n,o;return this instanceof r?(n="string"==typeof(n=e)?document.querySelectorAll(e):n)?(this.elements=(o=n,Array.isArray(o)?o:"object"==typeof o&&"number"==typeof o.length?c.call(o):[o]),this.options=s({},this.options),"function"==typeof t?i=t:s(this.options,t),i&&this.on("always",i),this.getImages(),d&&(this.jqDeferred=new d.Deferred),void setTimeout(this.check.bind(this))):void a.error("Bad element for imagesLoaded "+(n||e)):new r(e,t,i)}function i(e){this.img=e}function n(e,t){this.url=e,this.element=t,this.img=new Image}var d=t.jQuery,a=t.console,c=Array.prototype.slice,h=((r.prototype=Object.create(e.prototype)).options={},r.prototype.getImages=function(){this.images=[],this.elements.forEach(this.addElementImages,this)},r.prototype.addElementImages=function(e){"IMG"==e.nodeName&&this.addImage(e),!0===this.options.background&&this.addElementBackgroundImages(e);var t=e.nodeType;if(t&&h[t]){for(var i=e.querySelectorAll("img"),n=0;n<i.length;n++){var o=i[n];this.addImage(o)}if("string"==typeof this.options.background)for(var s=e.querySelectorAll(this.options.background),n=0;n<s.length;n++){var r=s[n];this.addElementBackgroundImages(r)}}},{1:!0,9:!0,11:!0});return r.prototype.addElementBackgroundImages=function(e){var t=getComputedStyle(e);if(t)for(var i=/url\((['"])?(.*?)\1\)/gi,n=i.exec(t.backgroundImage);null!==n;){var o=n&&n[2];o&&this.addBackground(o,e),n=i.exec(t.backgroundImage)}},r.prototype.addImage=function(e){e=new i(e);this.images.push(e)},r.prototype.addBackground=function(e,t){e=new n(e,t);this.images.push(e)},r.prototype.check=function(){function t(e,t,i){setTimeout(function(){n.progress(e,t,i)})}var n=this;return this.progressedCount=0,this.hasAnyBroken=!1,this.images.length?void this.images.forEach(function(e){e.once("progress",t),e.check()}):void this.complete()},r.prototype.progress=function(e,t,i){this.progressedCount++,this.hasAnyBroken=this.hasAnyBroken||!e.isLoaded,this.emitEvent("progress",[this,e,t]),this.jqDeferred&&this.jqDeferred.notify&&this.jqDeferred.notify(this,e),this.progressedCount==this.images.length&&this.complete(),this.options.debug&&a&&a.log("progress: "+i,e,t)},r.prototype.complete=function(){var e=this.hasAnyBroken?"fail":"done";this.isComplete=!0,this.emitEvent(e,[this]),this.emitEvent("always",[this]),this.jqDeferred&&(e=this.hasAnyBroken?"reject":"resolve",this.jqDeferred[e](this))},(i.prototype=Object.create(e.prototype)).check=function(){return this.getIsImageComplete()?void this.confirm(0!==this.img.naturalWidth,"naturalWidth"):(this.proxyImage=new Image,this.proxyImage.addEventListener("load",this),this.proxyImage.addEventListener("error",this),this.img.addEventListener("load",this),this.img.addEventListener("error",this),void(this.proxyImage.src=this.img.src))},i.prototype.getIsImageComplete=function(){return this.img.complete&&this.img.naturalWidth},i.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.img,t])},i.prototype.handleEvent=function(e){var t="on"+e.type;this[t]&&this[t](e)},i.prototype.onload=function(){this.confirm(!0,"onload"),this.unbindEvents()},i.prototype.onerror=function(){this.confirm(!1,"onerror"),this.unbindEvents()},i.prototype.unbindEvents=function(){this.proxyImage.removeEventListener("load",this),this.proxyImage.removeEventListener("error",this),this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},(n.prototype=Object.create(i.prototype)).check=function(){this.img.addEventListener("load",this),this.img.addEventListener("error",this),this.img.src=this.url,this.getIsImageComplete()&&(this.confirm(0!==this.img.naturalWidth,"naturalWidth"),this.unbindEvents())},n.prototype.unbindEvents=function(){this.img.removeEventListener("load",this),this.img.removeEventListener("error",this)},n.prototype.confirm=function(e,t){this.isLoaded=e,this.emitEvent("progress",[this,this.element,t])},(r.makeJQueryPlugin=function(e){(e=e||t.jQuery)&&((d=e).fn.imagesLoaded=function(e,t){return new r(this,e,t).jqDeferred.promise(d(this))})})(),r}),function(s){"use strict";s.fn.fitVids=function(e){var t,i,o={customSelector:null,ignore:null};return document.getElementById("fit-vids-style")||(t=document.head||document.getElementsByTagName("head")[0],(i=document.createElement("div")).innerHTML='<p>x</p><style id="fit-vids-style">.fluid-width-video-container{flex-grow: 1;width:100%;}.fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}</style>',t.appendChild(i.childNodes[1])),e&&s.extend(o,e),this.each(function(){var e=['iframe[src*="player.vimeo.com"]','iframe[src*="youtube.com"]','iframe[src*="youtube-nocookie.com"]','iframe[src*="kickstarter.com"][src*="video.html"]',"object","embed"],n=(o.customSelector&&e.push(o.customSelector),".fitvidsignore"),e=(o.ignore&&(n=n+", "+o.ignore),s(this).find(e.join(",")));(e=(e=e.not("object object")).not(n)).each(function(){var e,t,i=s(this);0<i.parents(n).length||"embed"===this.tagName.toLowerCase()&&i.parent("object").length||i.parent(".fluid-width-video-wrapper").length||(i.css("height")||i.css("width")||!isNaN(i.attr("height"))&&!isNaN(i.attr("width"))||(i.attr("height",9),i.attr("width",16)),e=("object"===this.tagName.toLowerCase()||i.attr("height")&&!isNaN(parseInt(i.attr("height"),10))?parseInt(i.attr("height"),10):i.height())/(isNaN(parseInt(i.attr("width"),10))?i.width():parseInt(i.attr("width"),10)),i.attr("name")||(t="fitvid"+s.fn.fitVids._count,i.attr("name",t),s.fn.fitVids._count++),i.wrap('<div class="fluid-width-video-container"><div class="fluid-width-video-wrapper"></div></div>').parent(".fluid-width-video-wrapper").css("padding-top",100*e+"%"),i.removeAttr("height").removeAttr("width"))})})},s.fn.fitVids._count=0}(window.jQuery||window.Zepto);